{"ast":null,"code":"import axios from 'axios';\nimport debounce from 'lodash/debounce';\nexport const API_BASE_URL = 'http://localhost:5000/api';\nexport const DAYS_OF_WEEK = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\nexport const defaultRoutes = DAYS_OF_WEEK.reduce((acc, day) => {\n  acc[day] = [{\n    index: 0,\n    jobs: []\n  }];\n  return acc;\n}, {});\nexport const validateRoutesStructure = routes => {\n  return DAYS_OF_WEEK.reduce((acc, day) => {\n    acc[day] = Array.isArray(routes[day]) ? routes[day] : [{\n      index: 0,\n      jobs: []\n    }];\n    return acc;\n  }, {});\n};\nexport const fetchWithAuth = async (url, method = 'GET', data = null, options = {}) => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    console.error('No token found in localStorage');\n    throw new Error('User is not authenticated');\n  }\n  const config = {\n    method,\n    url: `${API_BASE_URL}${url}`,\n    headers: {\n      Authorization: `Bearer ${token}`,\n      'Content-Type': 'application/json'\n    },\n    ...options\n  };\n  if (data) {\n    config.data = data;\n  }\n  try {\n    console.log(`Making ${method} request to: ${config.url}`);\n    const response = await axios(config);\n    console.log(`Response from ${url}:`, response.data);\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    console.error(`API Error for ${url}:`, ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    console.error('Full error object:', error);\n\n    // Provide more detailed error information\n    let errorMessage = 'An error occurred while fetching data.';\n    if (error.response) {\n      // The request was made and the server responded with a status code\n      // that falls out of the range of 2xx\n      errorMessage = `Server Error: ${error.response.status} - ${error.response.data.message || error.response.statusText}`;\n    } else if (error.request) {\n      // The request was made but no response was received\n      errorMessage = 'No response received from the server. Please check your network connection.';\n    } else {\n      // Something happened in setting up the request that triggered an Error\n      errorMessage = `Request Error: ${error.message}`;\n    }\n    throw new Error(errorMessage);\n  }\n};\n\n// You can add more utility functions here as needed\n\nexport const debouncedFetchWithAuth = debounce(fetchWithAuth, 300);\n\n// Example of a new utility function\nexport const formatDate = date => {\n  return new Date(date).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  });\n};","map":{"version":3,"names":["axios","debounce","API_BASE_URL","DAYS_OF_WEEK","defaultRoutes","reduce","acc","day","index","jobs","validateRoutesStructure","routes","Array","isArray","fetchWithAuth","url","method","data","options","token","localStorage","getItem","console","error","Error","config","headers","Authorization","log","response","_error$response","message","errorMessage","status","statusText","request","debouncedFetchWithAuth","formatDate","date","Date","toLocaleDateString","year","month"],"sources":["C:/AUTOLAWN/autolawn-frontend/src/components/utils.js"],"sourcesContent":["import axios from 'axios';\r\nimport debounce from 'lodash/debounce';\r\n\r\nexport const API_BASE_URL = 'http://localhost:5000/api';\r\n\r\nexport const DAYS_OF_WEEK = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\r\n\r\nexport const defaultRoutes = DAYS_OF_WEEK.reduce((acc, day) => {\r\n  acc[day] = [\r\n    {\r\n      index: 0,\r\n      jobs: [],\r\n    },\r\n  ];\r\n  return acc;\r\n}, {});\r\n\r\nexport const validateRoutesStructure = (routes) => {\r\n  return DAYS_OF_WEEK.reduce((acc, day) => {\r\n    acc[day] = Array.isArray(routes[day]) ? routes[day] : [{ index: 0, jobs: [] }];\r\n    return acc;\r\n  }, {});\r\n};\r\n\r\nexport const fetchWithAuth = async (url, method = 'GET', data = null, options = {}) => {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) {\r\n    console.error('No token found in localStorage');\r\n    throw new Error('User is not authenticated');\r\n  }\r\n  \r\n  const config = {\r\n    method,\r\n    url: `${API_BASE_URL}${url}`,\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n      'Content-Type': 'application/json',\r\n    },\r\n    ...options,\r\n  };\r\n\r\n  if (data) {\r\n    config.data = data;\r\n  }\r\n\r\n  try {\r\n    console.log(`Making ${method} request to: ${config.url}`);\r\n    const response = await axios(config);\r\n    console.log(`Response from ${url}:`, response.data);\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`API Error for ${url}:`, error.response?.data || error.message);\r\n    console.error('Full error object:', error);\r\n\r\n    // Provide more detailed error information\r\n    let errorMessage = 'An error occurred while fetching data.';\r\n    if (error.response) {\r\n      // The request was made and the server responded with a status code\r\n      // that falls out of the range of 2xx\r\n      errorMessage = `Server Error: ${error.response.status} - ${error.response.data.message || error.response.statusText}`;\r\n    } else if (error.request) {\r\n      // The request was made but no response was received\r\n      errorMessage = 'No response received from the server. Please check your network connection.';\r\n    } else {\r\n      // Something happened in setting up the request that triggered an Error\r\n      errorMessage = `Request Error: ${error.message}`;\r\n    }\r\n\r\n    throw new Error(errorMessage);\r\n  }\r\n};\r\n\r\n// You can add more utility functions here as needed\r\n\r\nexport const debouncedFetchWithAuth = debounce(fetchWithAuth, 300);\r\n\r\n// Example of a new utility function\r\nexport const formatDate = (date) => {\r\n  return new Date(date).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric'\r\n  });\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}