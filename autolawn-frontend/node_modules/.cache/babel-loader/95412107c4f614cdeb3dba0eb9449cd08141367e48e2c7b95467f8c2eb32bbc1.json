{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000/api';\nconst getHeaders = () => {\n  const token = sessionStorage.getItem('token'); // Use sessionStorage instead of localStorage\n  return {\n    Authorization: token ? `Bearer ${token}` : '',\n    'Content-Type': 'application/json'\n  };\n};\nconst handleApiError = error => {\n  if (error.response) {\n    // The request was made and the server responded with a status code\n    // that falls out of the range of 2xx\n    console.error('API Error Response:', error.response.data);\n    console.error('API Error Status:', error.response.status);\n    console.error('API Error Headers:', error.response.headers);\n  } else if (error.request) {\n    // The request was made but no response was received\n    console.error('API No Response:', error.request);\n  } else {\n    // Something happened in setting up the request that triggered an Error\n    console.error('API Error:', error.message);\n  }\n  throw error;\n};\nexport const fetchJobs = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/jobs`, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const fetchRoutes = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/routes`, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const saveRoute = async route => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/routes`, route, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const deleteRoute = async routeId => {\n  try {\n    await axios.delete(`${API_BASE_URL}/routes/${routeId}`, {\n      headers: getHeaders()\n    });\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const fetchCalendarEvents = async () => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/calendar-events`, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const createCalendarEvent = async eventData => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/calendar-events`, eventData, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const updateCalendarEvent = async (eventId, eventData) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/calendar-events/${eventId}`, eventData, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const deleteCalendarEvent = async eventId => {\n  try {\n    const response = await axios.delete(`${API_BASE_URL}/calendar-events/${eventId}`, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const updateRoute = async (routeId, updatedData) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/routes/${routeId}`, updatedData, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const updateJob = async (jobId, updatedData) => {\n  try {\n    const response = await axios.put(`${API_BASE_URL}/jobs/${jobId}`, updatedData, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const scheduleRoute = async (routeId, scheduleData) => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/routes/${routeId}/schedule`, scheduleData, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};\nexport const calculateRouteTotal = async routeId => {\n  try {\n    const response = await axios.get(`${API_BASE_URL}/routes/${routeId}/total`, {\n      headers: getHeaders()\n    });\n    return response.data;\n  } catch (error) {\n    handleApiError(error);\n  }\n};","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","getHeaders","token","sessionStorage","getItem","Authorization","handleApiError","error","response","console","data","status","headers","request","message","fetchJobs","get","fetchRoutes","saveRoute","route","post","deleteRoute","routeId","delete","fetchCalendarEvents","createCalendarEvent","eventData","updateCalendarEvent","eventId","put","deleteCalendarEvent","updateRoute","updatedData","updateJob","jobId","scheduleRoute","scheduleData","calculateRouteTotal"],"sources":["C:/AUTOLAWN/autolawn-frontend/src/pages/BuildRoutes/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL || 'http://localhost:5000/api';\r\n\r\nconst getHeaders = () => {\r\n  const token = sessionStorage.getItem('token'); // Use sessionStorage instead of localStorage\r\n  return { \r\n    Authorization: token ? `Bearer ${token}` : '',\r\n    'Content-Type': 'application/json'\r\n  };\r\n};\r\n\r\nconst handleApiError = (error) => {\r\n  if (error.response) {\r\n    // The request was made and the server responded with a status code\r\n    // that falls out of the range of 2xx\r\n    console.error('API Error Response:', error.response.data);\r\n    console.error('API Error Status:', error.response.status);\r\n    console.error('API Error Headers:', error.response.headers);\r\n  } else if (error.request) {\r\n    // The request was made but no response was received\r\n    console.error('API No Response:', error.request);\r\n  } else {\r\n    // Something happened in setting up the request that triggered an Error\r\n    console.error('API Error:', error.message);\r\n  }\r\n  throw error;\r\n};\r\n\r\nexport const fetchJobs = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_BASE_URL}/jobs`, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const fetchRoutes = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_BASE_URL}/routes`, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const saveRoute = async (route) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/routes`, route, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const deleteRoute = async (routeId) => {\r\n  try {\r\n    await axios.delete(`${API_BASE_URL}/routes/${routeId}`, { headers: getHeaders() });\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const fetchCalendarEvents = async () => {\r\n  try {\r\n    const response = await axios.get(`${API_BASE_URL}/calendar-events`, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const createCalendarEvent = async (eventData) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/calendar-events`, eventData, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const updateCalendarEvent = async (eventId, eventData) => {\r\n  try {\r\n    const response = await axios.put(`${API_BASE_URL}/calendar-events/${eventId}`, eventData, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const deleteCalendarEvent = async (eventId) => {\r\n  try {\r\n    const response = await axios.delete(`${API_BASE_URL}/calendar-events/${eventId}`, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const updateRoute = async (routeId, updatedData) => {\r\n  try {\r\n    const response = await axios.put(`${API_BASE_URL}/routes/${routeId}`, updatedData, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const updateJob = async (jobId, updatedData) => {\r\n  try {\r\n    const response = await axios.put(`${API_BASE_URL}/jobs/${jobId}`, updatedData, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const scheduleRoute = async (routeId, scheduleData) => {\r\n  try {\r\n    const response = await axios.post(`${API_BASE_URL}/routes/${routeId}/schedule`, scheduleData, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};\r\n\r\nexport const calculateRouteTotal = async (routeId) => {\r\n  try {\r\n    const response = await axios.get(`${API_BASE_URL}/routes/${routeId}/total`, { headers: getHeaders() });\r\n    return response.data;\r\n  } catch (error) {\r\n    handleApiError(error);\r\n  }\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}